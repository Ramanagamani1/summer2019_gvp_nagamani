from django.shortcuts import render
from django.http import HttpRequest,HttpResponse
from django.template import loader

# Create your views here.
from onlineapp.models import College, MockTest1, Student
from django.shortcuts import render_to_response

def hello(request):
    val=request.headers['Foo']
    #return HttpResponse("<!DOCTYPE html><html><body><h1>hello world</h1></body></html>")
    return HttpResponse(val)

def get_my_college(request):
    #val=request.headers['acronym']
    c=College.objects.values('name').filter(acronym="gvp")
    return HttpResponse(c)

def get_all_colleges(request):
    c=College.objects.values('name','acronym')
    htmltable="<table>"
    for x in c:
        htmltable+="<tr><td>"+x['name']+"</td>"+"<td>"+x['acronym']+"</td></tr>"
    htmltable+="</table>"
    return HttpResponse(htmltable)

def get_colleges(request):
    college_list = College.objects.values('name', 'acronym','id')
    template=loader.get_template('onlineapp/college.html')
    context={
        'college_list': college_list,
    }
    return HttpResponse(template.render(context, request))

def student_names(request,id):
    student_list=Student.objects.values('name','mocktest1__total','college__name').filter(college_id=id)
    template=loader.get_template('onlineapp/student.html')
    context={
        'student_list':student_list,
    }
    return HttpResponse(template.render(context,request))

def collegeform(request):
    return render(request,"form.html")


def hello_world(request):
    return  HttpResponse("<h1>Hello world</h1>")
